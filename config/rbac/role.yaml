apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
 name: manager-role
rules:
 ##
 ## Base operator rules
 ##
 # We need to get namespaces so the operator can read namespaces to ensure they exist
 - apiGroups:
    - ""
   resources:
    - namespaces
   verbs:
    - get
 # We need to manage Helm release secrets
 - apiGroups:
    - ""
   resources:
    - secrets
   verbs:
    - "*"
 # We need to create events on CRs about things happening during reconciliation
 - apiGroups:
    - ""
   resources:
    - events
   verbs:
    - create

 ##
 ## Rules for install.horusec.io/v1alpha1, Kind: HorusecManager
 ##
 - apiGroups:
    - install.horusec.io
   resources:
    - horusecmanagers
    - horusecmanagers/status
    - horusecmanagers/finalizers
   verbs:
    - create
    - delete
    - get
    - list
    - patch
    - update
    - watch
 - apiGroups:
    - ""
    - apps
    - autoscaling
    - batch
    - networking.k8s.io
    - rbac.authorization.k8s.io
    - statefulsets.apps
   resources:
    - configmaps
    - deployments
    - endpoints
    - horizontalpodautoscalers
    - ingresses
    - jobs
    - rolebindings
    - roles
    - serviceaccounts
    - services
    - statefulsets
   verbs:
    - "*"

# +kubebuilder:scaffold:rules
